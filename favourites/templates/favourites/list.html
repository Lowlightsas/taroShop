{% extends "shop/base.html" %}
{% load static %}

{% block content %}
</style>

<nav class="navbar navbar-expand-xl navbar-dark bg-dark">
  <div class="container-fluid">
      <a class="navbar-brand" href="{%url "shop:home"%}">Harmony of Esotericism</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarDark" aria-controls="navbarDark" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon">f</span>
      </button>
      <div class="collapse navbar-collapse show" id="navbarDark">
          <ul class="navbar-nav me-auto mb-2 mb-xl-0">
              <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="{%url "shop:list"%}">–¢–æ–≤–∞—Ä—ã</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link active" href="{%url "cart:cart_detail"%}">–ö–æ—Ä–∑–∏–Ω–∞</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="{%url "favourites:all"%}">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</a>
            </li>
           
              <div class="nav-item dropdown">
               
                <a class=" nav-link active dropdown-toggle" tabindex="-1" aria-disabled="true" id="dropdownMenuDark" data-bs-toggle="dropdown" >
                      –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                </a>
                
                  <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuDark">
                    {% if request.user.is_authenticated %}
                    <li class="nav-item">
                        <span class="navbar-text">
                            üïâÔ∏è Welcome, <strong>{{ request.user.first_name|default:request.user.username }}</strong> ‚ú®
                        </span>
                    </li>
                    <li><a class="dropdown-item" href="{%url "account:profile"%}">–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å</a></li>
                      <li><a class="dropdown-item" href="{%url "account:logout"%}">–í—ã–π—Ç–∏</a></li>
                      {% else %}
                      <li><a class="dropdown-item" href="{%url "account:login"%}">–í–æ–π—Ç–∏</a></li>
                      {% endif %}
                  </ul>
              </div>
          </ul>
        
        
      </div>
  </div>
</nav>
<div class="container my-5">
    <h1 class="text-center mb-4">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h1>
    
    
    {% if products %}
        <div class="row">
            {% for product in products %}
            <div class="col-12 col-md-6 col-lg-4 mb-4">
                <div class="card h-100 border-primary rounded custom-shadow" style="background: #000000a3;">
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
                    {% if product.image %}
                    <a href="{{ product.get_absolute_url }}">
                        <div class="aspect-ratio overflow-hidden" style="position: relative; padding-top: 100%;">
                            <img src="{{ product.image.url }}" class="w-100 h-100 position-absolute" style="object-fit: cover; top: 0; left: 0;" alt="{{ product.name }}">
                        </div>
                    </a>
                    {% else %}
                    <div class="aspect-ratio overflow-hidden" style="position: relative; padding-top: 100%;">
                        <img src="{% static 'deps/img/no_image.jpg' %}" class="w-100 h-100 position-absolute" style="object-fit: cover; top: 0; left: 0;" alt="{{ product.name }}">
                    </div>
                    {% endif %}
                    
                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
                    <div class="card-body">
                        <a href="{{ product.get_absolute_url }}" class="text-white" style="text-decoration:none">
                            <h5 class="card-title">{{ product.name }}</h5>
                        </a>
                        <p class="card-text text-truncate" style="color: white">{{ product.description }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <p><strong style="color: white">{{ product.price }}‚Ç∏</strong></p>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
                            <form action="{% url 'favourites:remove_to_fav' product.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger btn-sm">
                                    –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="text-center mb-4">
                <form action="{% url 'favourites:clear' %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-lg">
                        –û—á–∏—Å—Ç–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–µ
                    </button>
                </form>
            </div>
        </div>
    {% else %}
        <div class="alert alert-info text-center" role="alert">
            –£ –≤–∞—Å –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.
        </div>
    {% endif %}
    
</div>

<style>
    .custom-shadow {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* –¢–µ–º–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
    }

    .aspect-ratio {
        position: relative;
        width: 100%;
        height: 0;
        padding-top: 100%; /* –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω 1:1 */
    }
    body {
        background-image: url('https://cdn.steamstatic.com/steamcommunity/public/images/items/447120/f173d53b9c696240fba8c45b6ec735f7bc1ce01a.jpg');
        color: #ffffff; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }
</style>
{% endblock %}
